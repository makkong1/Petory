# Petory ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

## ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ ì „ì²´ êµ¬ì¡°ë„

```mermaid
graph TB
    subgraph "Client Layer"
        USER[ì‚¬ìš©ì<br/>User]
        ADMIN[ê´€ë¦¬ì<br/>Admin]
    end
    
    subgraph "Frontend Layer"
        REACT[React SPA<br/>- Styled-components<br/>- Recharts<br/>- Axios]
        SSE[SSE Client<br/>EventSource]
        WS[WebSocket Client<br/>STOMP.js]
    end
    
    subgraph "API Gateway & Security"
        GATEWAY[Spring Security<br/>JWT Filter]
        CONTROLLER[REST Controllers<br/>WebSocket Handlers<br/>SSE Endpoints]
    end
    
    subgraph "Business Logic Layer"
        subgraph "Core Domains"
            USER_SVC[User Service<br/>ì¸ì¦/ì¸ê°€/ì†Œì…œë¡œê·¸ì¸]
            BOARD_SVC[Board Service<br/>ì»¤ë®¤ë‹ˆí‹°/ì¸ê¸°ê¸€]
            CARE_SVC[Care Service<br/>í«ì¼€ì–´ ë§¤ì¹­]
            MISSING_SVC[MissingPet Service<br/>ì‹¤ì¢… ì œë³´]
            MEETUP_SVC[Meetup Service<br/>ì˜¤í”„ë¼ì¸ ëª¨ì„]
            LOCATION_SVC[Location Service<br/>ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤]
        end
        
        subgraph "Support Domains"
            CHAT_SVC[Chat Service<br/>ì‹¤ì‹œê°„ ì±„íŒ…]
            NOTIF_SVC[Notification Service<br/>ì•Œë¦¼ ì‹œìŠ¤í…œ]
            REPORT_SVC[Report Service<br/>ì‹ ê³  ë° ì œì¬]
            STATS_SVC[Statistics Service<br/>í†µê³„ ì§‘ê³„]
            FILE_SVC[File Service<br/>íŒŒì¼ ê´€ë¦¬]
            ACTIVITY_SVC[Activity Service<br/>í™œë™ ë¡œê·¸]
        end
    end
    
    subgraph "Data Layer"
        REPO[JPA Repositories]
        MYSQL[(MySQL 8.0<br/>ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤)]
        REDIS[(Redis<br/>ìºì‹œ ë° ì•Œë¦¼ ë²„í¼)]
    end
    
    subgraph "External Services"
        NAVER_MAP[Naver Map API<br/>Geocoding/Directions]
        EMAIL[SMTP Server<br/>ì´ë©”ì¼ ë°œì†¡]
        OAUTH[OAuth2 Providers<br/>Google/Kakao/Naver]
    end
    
    subgraph "Scheduler Layer"
        STATS_SCHED[Statistics Scheduler<br/>ì¼ë³„ í†µê³„ ì§‘ê³„]
        POPULAR_SCHED[Popularity Scheduler<br/>ì¸ê¸°ê¸€ ìŠ¤ëƒ…ìƒ·]
        SANCTION_SCHED[Sanction Scheduler<br/>ì œì¬ ìë™ í•´ì œ]
        CARE_SCHED[Care Scheduler<br/>ì¼€ì–´ ìš”ì²­ ë§Œë£Œ]
    end
    
    USER --> REACT
    ADMIN --> REACT
    REACT --> SSE
    REACT --> WS
    REACT --> GATEWAY
    SSE --> GATEWAY
    WS --> GATEWAY
    
    GATEWAY --> CONTROLLER
    
    CONTROLLER --> USER_SVC
    CONTROLLER --> BOARD_SVC
    CONTROLLER --> CARE_SVC
    CONTROLLER --> MISSING_SVC
    CONTROLLER --> MEETUP_SVC
    CONTROLLER --> LOCATION_SVC
    CONTROLLER --> CHAT_SVC
    CONTROLLER --> NOTIF_SVC
    CONTROLLER --> REPORT_SVC
    CONTROLLER --> STATS_SVC
    CONTROLLER --> FILE_SVC
    CONTROLLER --> ACTIVITY_SVC
    
    USER_SVC --> REPO
    BOARD_SVC --> REPO
    CARE_SVC --> REPO
    CARE_SVC --> CHAT_SVC
    MISSING_SVC --> REPO
    MEETUP_SVC --> REPO
    MEETUP_SVC --> CHAT_SVC
    LOCATION_SVC --> REPO
    CHAT_SVC --> REPO
    NOTIF_SVC --> REPO
    NOTIF_SVC --> REDIS
    REPORT_SVC --> REPO
    STATS_SVC --> REPO
    FILE_SVC --> REPO
    ACTIVITY_SVC --> REPO
    
    REPO --> MYSQL
    
    STATS_SCHED --> STATS_SVC
    POPULAR_SCHED --> BOARD_SVC
    SANCTION_SCHED --> REPORT_SVC
    CARE_SCHED --> CARE_SVC
    
    LOCATION_SVC --> NAVER_MAP
    USER_SVC --> EMAIL
    USER_SVC --> OAUTH
    
    style REACT fill:#61dafb
    style GATEWAY fill:#6db33f
    style MYSQL fill:#4479a1
    style REDIS fill:#dc382d
    style CHAT_SVC fill:#61dafb
    style NOTIF_SVC fill:#ffa500
```

## ğŸ”„ ë°ì´í„° íë¦„ë„

### 1. ì‚¬ìš©ì ìš”ì²­ ì²˜ë¦¬ íë¦„

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant F as React Frontend
    participant S as Spring Security
    participant C as Controller
    participant SV as Service
    participant R as Repository
    participant DB as MySQL/Redis
    
    U->>F: ì‚¬ìš©ì ì•¡ì…˜ (í´ë¦­/ì…ë ¥)
    F->>S: HTTP Request + JWT Token
    S->>S: í† í° ê²€ì¦ ë° ì‚¬ìš©ì ì¸ì¦
    alt í† í° ë§Œë£Œ
        S->>F: 401 Unauthorized
        F->>S: Refresh Tokenìœ¼ë¡œ ì¬ë°œê¸‰
    end
    S->>C: ì¸ì¦ëœ ìš”ì²­ ì „ë‹¬
    C->>SV: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í˜¸ì¶œ
    SV->>R: ë°ì´í„° ì¡°íšŒ/ì €ì¥
    R->>DB: SQL ì¿¼ë¦¬ ì‹¤í–‰
    DB-->>R: ë°ì´í„° ë°˜í™˜
    R-->>SV: Entity ë°˜í™˜
    SV->>SV: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
    SV-->>C: DTO ë°˜í™˜
    C-->>F: JSON ì‘ë‹µ
    F-->>U: UI ì—…ë°ì´íŠ¸
```

### 2. ì‹¤ì‹œê°„ ì•Œë¦¼ íë¦„

```mermaid
sequenceDiagram
    participant D as Domain Service
    participant NS as NotificationService
    participant MySQL as MySQL
    participant Redis as Redis
    participant SSE as SSE Service
    participant C as Frontend Client
    
    D->>NS: ì•Œë¦¼ ìƒì„± ìš”ì²­
    NS->>MySQL: ì•Œë¦¼ ì €ì¥ (ì˜êµ¬)
    NS->>Redis: ì•Œë¦¼ ì €ì¥ (ìµœì‹  50ê°œ, TTL 24h)
    NS->>SSE: ì‹¤ì‹œê°„ ì „ì†¡
    SSE->>C: SSE ì´ë²¤íŠ¸ ì „ì†¡
    C->>C: ì•Œë¦¼ UI ì—…ë°ì´íŠ¸
    
    Note over C: ì‚¬ìš©ìê°€ ì•Œë¦¼ ì¡°íšŒ ì‹œ
    C->>NS: ì•Œë¦¼ ëª©ë¡ ìš”ì²­
    NS->>Redis: ìµœì‹  ì•Œë¦¼ ì¡°íšŒ (ìš°ì„ )
    Redis-->>NS: ìµœì‹  ì•Œë¦¼ ë°˜í™˜
    NS->>MySQL: ì „ì²´ ì•Œë¦¼ ì¡°íšŒ (ë°±ì—…)
    MySQL-->>NS: ì „ì²´ ì•Œë¦¼ ë°˜í™˜
    NS->>NS: ë°ì´í„° ë³‘í•© ë° ì¤‘ë³µ ì œê±°
    NS-->>C: í†µí•© ì•Œë¦¼ ëª©ë¡ ë°˜í™˜
```

### 3. ì‹¤ì‹œê°„ ì±„íŒ… íë¦„

```mermaid
sequenceDiagram
    participant U1 as ì‚¬ìš©ì 1
    participant F1 as Frontend 1
    participant WS as WebSocket Server
    participant F2 as Frontend 2
    participant U2 as ì‚¬ìš©ì 2
    participant DB as MySQL
    
    U1->>F1: ë©”ì‹œì§€ ì…ë ¥
    F1->>WS: STOMP ë©”ì‹œì§€ ì „ì†¡
    WS->>DB: ë©”ì‹œì§€ ì €ì¥
    WS->>F2: STOMP ë©”ì‹œì§€ ë¸Œë¡œë“œìºìŠ¤íŠ¸
    F2->>U2: ì‹¤ì‹œê°„ ë©”ì‹œì§€ í‘œì‹œ
    
    Note over WS,DB: ì½ìŒ ìƒíƒœ ì—…ë°ì´íŠ¸
    F2->>WS: ì½ìŒ ìƒíƒœ ì „ì†¡
    WS->>DB: ì½ìŒ ìƒíƒœ ì €ì¥
    WS->>F1: ì½ìŒ ìƒíƒœ ë¸Œë¡œë“œìºìŠ¤íŠ¸
    F1->>U1: ì½ìŒ í‘œì‹œ ì—…ë°ì´íŠ¸
```

### 4. í«ì¼€ì–´ ë§¤ì¹­ í”„ë¡œì„¸ìŠ¤

```mermaid
flowchart TD
    START[ì‚¬ìš©ì: í«ì¼€ì–´ ìš”ì²­ ìƒì„±] --> CHECK1{ì´ë©”ì¼ ì¸ì¦<br/>í™•ì¸}
    CHECK1 -->|ë¯¸ì¸ì¦| EMAIL[ì´ë©”ì¼ ì¸ì¦ í˜ì´ì§€]
    CHECK1 -->|ì¸ì¦ì™„ë£Œ| CREATE[CareRequest ìƒì„±]
    CREATE --> CHAT[ì±„íŒ…ë°© ìë™ ìƒì„±]
    CREATE --> NOTIF1[ì•Œë¦¼ ë°œì†¡]
    
    NOTIF1 --> WAIT[ì§€ì›ì ëŒ€ê¸°]
    WAIT --> APPLY[ì§€ì›ì: ì§€ì› ì‹ ì²­]
    APPLY --> NOTIF2[ìš”ì²­ìì—ê²Œ ì•Œë¦¼]
    
    NOTIF2 --> APPROVE[ìš”ì²­ì: ì§€ì› ìŠ¹ì¸]
    APPROVE --> STATUS1[ìƒíƒœ: IN_PROGRESS]
    STATUS1 --> CHAT2[ì±„íŒ… í™œì„±í™”]
    
    CHAT2 --> COMPLETE[ì¼€ì–´ ì™„ë£Œ]
    COMPLETE --> STATUS2[ìƒíƒœ: COMPLETED]
    STATUS2 --> REVIEW[ìƒí˜¸ ë¦¬ë·° ì‘ì„±]
    REVIEW --> END[í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ]
    
    style EMAIL fill:#ffcccc
    style CREATE fill:#ccffcc
    style CHAT fill:#ccccff
    style REVIEW fill:#ffffcc
```

### 5. ëª¨ì„ ìƒì„± ë° ì°¸ì—¬ í”„ë¡œì„¸ìŠ¤

```mermaid
flowchart TD
    START[ì‚¬ìš©ì: ëª¨ì„ ìƒì„±] --> CHECK{ì´ë©”ì¼ ì¸ì¦<br/>í™•ì¸}
    CHECK -->|ë¯¸ì¸ì¦| EMAIL[ì´ë©”ì¼ ì¸ì¦ í˜ì´ì§€]
    CHECK -->|ì¸ì¦ì™„ë£Œ| CREATE[Meetup ìƒì„±]
    CREATE --> CHAT[ê·¸ë£¹ ì±„íŒ…ë°© ìë™ ìƒì„±]
    CREATE --> STATUS1[ìƒíƒœ: RECRUITING]
    
    STATUS1 --> JOIN[ë‹¤ë¥¸ ì‚¬ìš©ì: ì°¸ì—¬ ì‹ ì²­]
    JOIN --> CHECK2{ì¸ì› ì²´í¬}
    CHECK2 -->|ì´ˆê³¼| REJECT[ì°¸ì—¬ ê±°ë¶€]
    CHECK2 -->|ê°€ëŠ¥| ADD[ì°¸ì—¬ì ì¶”ê°€]
    ADD --> CHAT2[ì±„íŒ…ë°© ìë™ ì¶”ê°€]
    ADD --> COUNT[ì¸ì› ìˆ˜ ì¦ê°€]
    
    COUNT --> CHECK3{ìµœëŒ€ ì¸ì›<br/>ë„ë‹¬?}
    CHECK3 -->|Yes| STATUS2[ìƒíƒœ: CLOSED]
    CHECK3 -->|No| STATUS1
    
    STATUS2 --> EVENT[ëª¨ì„ ì¼ì‹œ]
    EVENT --> STATUS3[ìƒíƒœ: COMPLETED]
    STATUS3 --> END[í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ]
    
    style EMAIL fill:#ffcccc
    style CREATE fill:#ccffcc
    style CHAT fill:#ccccff
    style STATUS2 fill:#ffffcc
```

## ğŸ—‚ï¸ ë„ë©”ì¸ êµ¬ì¡°ë„

### ë„ë©”ì¸ë³„ ì±…ì„ ë¶„ë¦¬

```mermaid
graph LR
    subgraph "Core Business Domains"
        USER[User Domain<br/>ì‚¬ìš©ì/ì¸ì¦]
        BOARD[Board Domain<br/>ì»¤ë®¤ë‹ˆí‹°]
        CARE[Care Domain<br/>í«ì¼€ì–´]
        MISSING[MissingPet Domain<br/>ì‹¤ì¢… ì œë³´]
        MEETUP[Meetup Domain<br/>ëª¨ì„]
        LOCATION[Location Domain<br/>ìœ„ì¹˜ ì„œë¹„ìŠ¤]
    end
    
    subgraph "Cross-Cutting Domains"
        CHAT[Chat Domain<br/>ì±„íŒ…]
        NOTIF[Notification Domain<br/>ì•Œë¦¼]
        REPORT[Report Domain<br/>ì‹ ê³ ]
        FILE[File Domain<br/>íŒŒì¼]
    end
    
    subgraph "Infrastructure Domains"
        STATS[Statistics Domain<br/>í†µê³„]
        ACTIVITY[Activity Domain<br/>í™œë™ ë¡œê·¸]
    end
    
    USER --> BOARD
    USER --> CARE
    USER --> MISSING
    USER --> MEETUP
    USER --> LOCATION
    
    BOARD --> NOTIF
    BOARD --> REPORT
    BOARD --> FILE
    
    CARE --> CHAT
    CARE --> NOTIF
    CARE --> REPORT
    
    MEETUP --> CHAT
    MEETUP --> NOTIF
    
    MISSING --> NOTIF
    MISSING --> FILE
    
    LOCATION --> FILE
    
    style USER fill:#ff9999
    style CHAT fill:#99ccff
    style NOTIF fill:#ffcc99
    style REPORT fill:#ff99cc
```

## ğŸ” ì¸ì¦ ë° ë³´ì•ˆ íë¦„

### JWT ì¸ì¦ í”„ë¡œì„¸ìŠ¤

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant F as Frontend
    participant A as AuthController
    participant S as AuthService
    participant DB as MySQL
    participant JWT as JWT Util
    
    U->>F: ë¡œê·¸ì¸ ìš”ì²­
    F->>A: POST /api/auth/login
    A->>S: ì¸ì¦ ì²˜ë¦¬
    S->>DB: ì‚¬ìš©ì ì¡°íšŒ ë° ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
    DB-->>S: ì‚¬ìš©ì ì •ë³´
    S->>JWT: Access Token ìƒì„± (15ë¶„)
    S->>JWT: Refresh Token ìƒì„± (1ì¼)
    S->>DB: Refresh Token ì €ì¥
    S-->>A: í† í° ë°˜í™˜
    A-->>F: JWT í† í° ì‘ë‹µ
    F->>F: localStorageì— ì €ì¥
    
    Note over F: ì´í›„ ëª¨ë“  API ìš”ì²­
    F->>A: API Request + Access Token
    A->>JWT: í† í° ê²€ì¦
    alt í† í° ìœ íš¨
        JWT-->>A: ê²€ì¦ ì„±ê³µ
        A->>A: ìš”ì²­ ì²˜ë¦¬
    else í† í° ë§Œë£Œ
        JWT-->>A: 401 Unauthorized
        F->>A: Refresh Tokenìœ¼ë¡œ ì¬ë°œê¸‰ ìš”ì²­
        A->>S: í† í° ê°±ì‹ 
        S->>DB: Refresh Token ê²€ì¦
        S->>JWT: ìƒˆ Access Token ìƒì„±
        S-->>A: ìƒˆ í† í° ë°˜í™˜
        A-->>F: ìƒˆ Access Token
        F->>A: ì›ë˜ ìš”ì²­ ì¬ì‹œë„
    end
```

### OAuth2 ì†Œì…œ ë¡œê·¸ì¸ íë¦„

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant F as Frontend
    participant B as Backend
    participant O as OAuth Provider<br/>Google/Kakao/Naver
    participant DB as MySQL
    
    U->>F: ì†Œì…œ ë¡œê·¸ì¸ í´ë¦­
    F->>B: GET /api/auth/oauth2/authorize/{provider}
    B->>O: OAuth2 ì¸ì¦ ìš”ì²­
    O->>U: ë¡œê·¸ì¸ í˜ì´ì§€
    U->>O: ë¡œê·¸ì¸
    O->>B: Authorization Code
    B->>O: Access Token ìš”ì²­
    O-->>B: Access Token + User Info
    B->>B: ì´ë©”ì¼ë¡œ ê¸°ì¡´ ê³„ì • í™•ì¸
    alt ê¸°ì¡´ ê³„ì • ì¡´ì¬
        B->>DB: ì†Œì…œ ê³„ì • ì—°ê²°
    else ì‹ ê·œ ì‚¬ìš©ì
        B->>DB: ì‹ ê·œ ê³„ì • ìƒì„±
        B->>DB: ì†Œì…œ ê³„ì • ì €ì¥
    end
    B->>B: JWT í† í° ìƒì„±
    B-->>F: JWT í† í° ë°˜í™˜
    F->>F: ë¡œê·¸ì¸ ì™„ë£Œ
```

## ğŸ“Š ìŠ¤ì¼€ì¤„ëŸ¬ ì‘ì—… íë¦„

### ì¼ë³„ í†µê³„ ì§‘ê³„ í”„ë¡œì„¸ìŠ¤

```mermaid
flowchart TD
    START[ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰<br/>ë§¤ì¼ 18:30] --> COLLECT[ë°ì´í„° ìˆ˜ì§‘]
    
    COLLECT --> USER_COUNT[ì‹ ê·œ ì‚¬ìš©ì ìˆ˜]
    COLLECT --> POST_COUNT[ì‹ ê·œ ê²Œì‹œê¸€ ìˆ˜]
    COLLECT --> CARE_COUNT[ì‹ ê·œ ì¼€ì–´ ìš”ì²­ ìˆ˜]
    COLLECT --> COMPLETE_COUNT[ì™„ë£Œëœ ì¼€ì–´ ìˆ˜]
    COLLECT --> ACTIVE_COUNT[í™œì„± ì‚¬ìš©ì ìˆ˜]
    
    USER_COUNT --> AGGREGATE[í†µê³„ ì§‘ê³„]
    POST_COUNT --> AGGREGATE
    CARE_COUNT --> AGGREGATE
    COMPLETE_COUNT --> AGGREGATE
    ACTIVE_COUNT --> AGGREGATE
    
    AGGREGATE --> CHECK{ì˜¤ëŠ˜ í†µê³„<br/>ì¡´ì¬?}
    CHECK -->|Yes| UPDATE[ê¸°ì¡´ í†µê³„ ì—…ë°ì´íŠ¸]
    CHECK -->|No| CREATE[ìƒˆ í†µê³„ ìƒì„±]
    
    UPDATE --> SAVE[DailyStatistics ì €ì¥]
    CREATE --> SAVE
    
    SAVE --> END[ì‘ì—… ì™„ë£Œ]
    
    style START fill:#ffcccc
    style AGGREGATE fill:#ccffcc
    style SAVE fill:#ccccff
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ì£¼ìš” í…Œì´ë¸” ê´€ê³„ë„

```mermaid
erDiagram
    users ||--o{ pet : "ì†Œìœ "
    users ||--o{ board : "ì‘ì„±"
    users ||--o{ comment : "ì‘ì„±"
    users ||--o{ care_request : "ìš”ì²­"
    users ||--o{ care_application : "ì§€ì›"
    users ||--o{ meetup : "ì£¼ìµœ"
    users ||--o{ meetup_participants : "ì°¸ì—¬"
    users ||--o{ missing_pet_board : "ì‹ ê³ "
    users ||--o{ notification : "ìˆ˜ì‹ "
    users ||--o{ report : "ì‹ ê³ /ì²˜ë¦¬"
    users ||--o{ user_sanction : "ì œì¬"
    
    board ||--o{ comment : "ëŒ“ê¸€"
    board ||--o{ board_reaction : "ë°˜ì‘"
    board ||--o{ board_view_log : "ì¡°íšŒ"
    board ||--o{ board_popularity_snapshot : "ì¸ê¸°ë„"
    
    care_request ||--o{ care_application : "ì§€ì›"
    care_request ||--|| care_review : "ë¦¬ë·°"
    care_request ||--o{ care_request_comment : "ëŒ“ê¸€"
    
    meetup ||--o{ meetup_participants : "ì°¸ì—¬ì"
    
    location_service ||--o{ location_service_review : "ë¦¬ë·°"
    
    attachment_file }o--|| users : "USER_PROFILE"
    attachment_file }o--|| pet : "PET_PROFILE"
    attachment_file }o--|| board : "BOARD"
    attachment_file }o--|| care_request : "CARE_REQUEST"
    attachment_file }o--|| missing_pet_board : "MISSING_PET"
```

## ğŸ”„ ìºì‹± ì „ëµ ë‹¤ì´ì–´ê·¸ë¨

### Redis ìºì‹± êµ¬ì¡°

```mermaid
graph TB
    subgraph "Redis Cache Structure"
        NOTIF_CACHE[notification:userId<br/>ìµœì‹  ì•Œë¦¼ 50ê°œ<br/>TTL: 24h]
        BOARD_CACHE[boardDetail:boardId<br/>ê²Œì‹œê¸€ ìƒì„¸<br/>TTL: 1h]
        EMAIL_CACHE[email_verification:pre_registration:email<br/>íšŒì›ê°€ì… ì „ ì¸ì¦<br/>TTL: 24h]
        LOCATION_CACHE[locationService:category:top10<br/>ì¸ê¸° ìœ„ì¹˜ ì„œë¹„ìŠ¤<br/>TTL: 6h]
    end
    
    subgraph "Cache Operations"
        READ[ì¡°íšŒ ìš”ì²­] --> CHECK{ìºì‹œ<br/>ì¡´ì¬?}
        CHECK -->|Yes| HIT[ìºì‹œ íˆíŠ¸<br/>ì¦‰ì‹œ ë°˜í™˜]
        CHECK -->|No| MISS[ìºì‹œ ë¯¸ìŠ¤<br/>DB ì¡°íšŒ]
        MISS --> WRITE[ìºì‹œì— ì €ì¥]
        WRITE --> RETURN[ë°ì´í„° ë°˜í™˜]
        
        UPDATE[ë°ì´í„° ë³€ê²½] --> EVICT[ìºì‹œ ë¬´íš¨í™”<br/>@CacheEvict]
        EVICT --> DB_WRITE[DBì— ì €ì¥]
    end
    
    style NOTIF_CACHE fill:#ff9999
    style BOARD_CACHE fill:#99ff99
    style EMAIL_CACHE fill:#9999ff
    style LOCATION_CACHE fill:#ffff99
```

## ğŸš€ ë°°í¬ ì•„í‚¤í…ì²˜ (í–¥í›„)

### í˜„ì¬ êµ¬ì¡° (ê°œë°œ í™˜ê²½)

```mermaid
graph TB
    DEV[ê°œë°œì ë¡œì»¬ í™˜ê²½]
    DEV --> FRONTEND[React Dev Server<br/>localhost:3000]
    DEV --> BACKEND[Spring Boot<br/>localhost:8080]
    DEV --> MYSQL_LOCAL[MySQL Local<br/>localhost:3306]
    DEV --> REDIS_LOCAL[Redis Local<br/>localhost:6379]
    
    FRONTEND --> BACKEND
    BACKEND --> MYSQL_LOCAL
    BACKEND --> REDIS_LOCAL
    BACKEND --> EXTERNAL[External APIs<br/>Naver Map/OAuth]
```

### ì œì•ˆ ë°°í¬ êµ¬ì¡°

```mermaid
graph TB
    subgraph "Client"
        USER[ì‚¬ìš©ì]
        ADMIN[ê´€ë¦¬ì]
    end
    
    subgraph "CDN & Load Balancer"
        CDN[CloudFlare/CDN<br/>ì •ì  ë¦¬ì†ŒìŠ¤]
        LB[Load Balancer<br/>Nginx/HAProxy]
    end
    
    subgraph "Application Layer"
        FE1[React App<br/>Instance 1]
        FE2[React App<br/>Instance 2]
        BE1[Spring Boot<br/>Instance 1]
        BE2[Spring Boot<br/>Instance 2]
    end
    
    subgraph "Data Layer"
        MYSQL_MASTER[(MySQL Master<br/>ì“°ê¸°)]
        MYSQL_SLAVE[(MySQL Slave<br/>ì½ê¸°)]
        REDIS_CLUSTER[(Redis Cluster<br/>ìºì‹œ)]
    end
    
    subgraph "External Services"
        MAP_API[Naver Map API]
        EMAIL_SVC[Email Service]
        OAUTH_SVC[OAuth Providers]
    end
    
    USER --> CDN
    ADMIN --> CDN
    CDN --> LB
    LB --> FE1
    LB --> FE2
    FE1 --> BE1
    FE1 --> BE2
    FE2 --> BE1
    FE2 --> BE2
    
    BE1 --> MYSQL_MASTER
    BE1 --> MYSQL_SLAVE
    BE1 --> REDIS_CLUSTER
    BE2 --> MYSQL_MASTER
    BE2 --> MYSQL_SLAVE
    BE2 --> REDIS_CLUSTER
    
    BE1 --> MAP_API
    BE1 --> EMAIL_SVC
    BE1 --> OAUTH_SVC
    BE2 --> MAP_API
    BE2 --> EMAIL_SVC
    BE2 --> OAUTH_SVC
    
    MYSQL_MASTER --> MYSQL_SLAVE
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™” ì „ëµ

### ì¿¼ë¦¬ ìµœì í™” ì „ëµ

```mermaid
graph LR
    PROBLEM[N+1 ë¬¸ì œ] --> SOLUTION1[ë°°ì¹˜ ì¡°íšŒ<br/>IN ì ˆ ì‚¬ìš©]
    PROBLEM --> SOLUTION2[JOIN FETCH<br/>í•œ ë²ˆì— ì¡°íšŒ]
    PROBLEM --> SOLUTION3[í˜ì´ì§• ì²˜ë¦¬<br/>LIMIT/OFFSET]
    
    SOLUTION1 --> RESULT1[1000ê°œ ê²Œì‹œê¸€<br/>2001ê°œ ì¿¼ë¦¬ â†’ 3ê°œ ì¿¼ë¦¬]
    SOLUTION2 --> RESULT2[ê´€ê³„ ë°ì´í„°<br/>í•œ ë²ˆì— ë¡œë”©]
    SOLUTION3 --> RESULT3[ëŒ€ëŸ‰ ë°ì´í„°<br/>ë¶„í•  ì¡°íšŒ]
    
    CACHE[ìºì‹± ì „ëµ] --> REDIS1[Redis<br/>ì•Œë¦¼/ì¸ê¸°ê¸€]
    CACHE --> SPRING[Spring Cache<br/>ê²Œì‹œê¸€ ìƒì„¸]
    
    INDEX[ì¸ë±ìŠ¤ ì „ëµ] --> SINGLE[ë‹¨ì¼ ì¸ë±ìŠ¤<br/>ì™¸ë˜í‚¤/ì •ë ¬]
    INDEX --> COMPOSITE[ë³µí•© ì¸ë±ìŠ¤<br/>ì¡°ê±´+ì •ë ¬]
    INDEX --> SPATIAL[ê³µê°„ ì¸ë±ìŠ¤<br/>ìœ„ì¹˜ ê²€ìƒ‰]
    
    style PROBLEM fill:#ffcccc
    style RESULT1 fill:#ccffcc
    style RESULT2 fill:#ccffcc
    style RESULT3 fill:#ccffcc
```

## ğŸ”’ ë³´ì•ˆ ì•„í‚¤í…ì²˜

### ë³´ì•ˆ ë ˆì´ì–´ êµ¬ì¡°

```mermaid
graph TB
    REQUEST[HTTP Request] --> CORS[CORS Filter]
    CORS --> JWT[JWT Authentication Filter]
    JWT --> SECURITY[Spring Security]
    SECURITY --> ROLE[Role-based Access Control]
    ROLE --> METHOD[Method-level Security<br/>@PreAuthorize]
    METHOD --> CONTROLLER[Controller]
    
    JWT -->|ì¸ì¦ ì‹¤íŒ¨| ERROR1[401 Unauthorized]
    ROLE -->|ê¶Œí•œ ì—†ìŒ| ERROR2[403 Forbidden]
    METHOD -->|ì ‘ê·¼ ê±°ë¶€| ERROR3[403 Forbidden]
    
    CONTROLLER --> VALIDATION[Input Validation<br/>@Valid]
    VALIDATION --> SERVICE[Service Layer]
    
    style JWT fill:#ff9999
    style SECURITY fill:#ff9999
    style ROLE fill:#ff9999
    style METHOD fill:#ff9999
    style VALIDATION fill:#ffcc99
```

## ğŸ“± í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### React ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```mermaid
graph TB
    APP[App.js<br/>ë¼ìš°íŒ…/ì „ì—­ ìƒíƒœ] --> NAV[Navigation<br/>íƒ­ ë„¤ë¹„ê²Œì´ì…˜]
    APP --> HOME[HomePage<br/>í™ˆ í™”ë©´]
    APP --> BOARD[CommunityBoard<br/>ì»¤ë®¤ë‹ˆí‹°]
    APP --> CARE[CareRequestList<br/>í«ì¼€ì–´]
    APP --> MISSING[MissingPetBoardPage<br/>ì‹¤ì¢… ì œë³´]
    APP --> MEETUP[MeetupPage<br/>ëª¨ì„]
    APP --> LOCATION[LocationServiceMap<br/>ìœ„ì¹˜ ì„œë¹„ìŠ¤]
    APP --> ADMIN[AdminPanel<br/>ê´€ë¦¬ì]
    APP --> CHAT[ChatWidget<br/>ì±„íŒ…]
    
    APP --> AUTH[AuthContext<br/>ì¸ì¦ ìƒíƒœ]
    APP --> THEME[ThemeContext<br/>í…Œë§ˆ]
    
    AUTH --> API1[authApi<br/>ë¡œê·¸ì¸/íšŒì›ê°€ì…]
    BOARD --> API2[boardApi<br/>ê²Œì‹œê¸€/ëŒ“ê¸€]
    CARE --> API3[careRequestApi<br/>ì¼€ì–´ ìš”ì²­]
    MISSING --> API4[missingPetApi<br/>ì‹¤ì¢… ì œë³´]
    MEETUP --> API5[meetupApi<br/>ëª¨ì„]
    LOCATION --> API6[locationServiceApi<br/>ìœ„ì¹˜ ì„œë¹„ìŠ¤]
    CHAT --> API7[chatApi<br/>ì±„íŒ…]
    
    API1 --> BACKEND[Backend API<br/>localhost:8080]
    API2 --> BACKEND
    API3 --> BACKEND
    API4 --> BACKEND
    API5 --> BACKEND
    API6 --> BACKEND
    API7 --> BACKEND
    
    style APP fill:#61dafb
    style AUTH fill:#ff9999
    style BACKEND fill:#6db33f
```

## ğŸ¯ í•µì‹¬ ì•„í‚¤í…ì²˜ íŒ¨í„´

### 1. ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Presentation Layer         â”‚
â”‚   (Controller, DTO Converter)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Business Logic Layer       â”‚
â”‚   (Service, Domain Logic)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Data Access Layer          â”‚
â”‚   (Repository, Entity)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Database Layer              â”‚
â”‚   (MySQL, Redis)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„ (DDD)

```
com.linkup.Petory.domain/
â”œâ”€â”€ user/           # ì‚¬ìš©ì ë„ë©”ì¸
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ repository/
â”‚   â””â”€â”€ entity/
â”œâ”€â”€ board/          # ê²Œì‹œíŒ ë„ë©”ì¸
â”œâ”€â”€ care/           # í«ì¼€ì–´ ë„ë©”ì¸
â”œâ”€â”€ meetup/         # ëª¨ì„ ë„ë©”ì¸
â”œâ”€â”€ location/       # ìœ„ì¹˜ ì„œë¹„ìŠ¤ ë„ë©”ì¸
â””â”€â”€ ...
```

### 3. ì´ë²¤íŠ¸ ê¸°ë°˜ ì—°ë™

```
ë„ë©”ì¸ ì„œë¹„ìŠ¤ â†’ NotificationService â†’ Redis + MySQL â†’ SSE â†’ Frontend
ë„ë©”ì¸ ì„œë¹„ìŠ¤ â†’ ChatService â†’ WebSocket â†’ Frontend
ë„ë©”ì¸ ì„œë¹„ìŠ¤ â†’ ReportService â†’ ìë™ ì œì¬ ì²˜ë¦¬
```

## ğŸ“Š ê¸°ìˆ  ìŠ¤íƒ ìš”ì•½

### Backend Stack
- **Framework**: Spring Boot 3.5.7
- **Language**: Java 17
- **ORM**: Spring Data JPA (Hibernate)
- **Database**: MySQL 8.0
- **Cache**: Redis
- **Security**: Spring Security + JWT
- **WebSocket**: Spring WebSocket (STOMP)
- **Scheduling**: Spring Scheduler
- **Email**: JavaMailSender

### Frontend Stack
- **Framework**: React 19
- **Styling**: Styled-components
- **Charts**: Recharts
- **HTTP**: Axios
- **WebSocket**: SockJS + STOMP.js
- **SSE**: EventSource API

### External Services
- **Map**: Naver Map API
- **OAuth**: Google, Kakao, Naver

- **Email**: SMTP Server
## ğŸ”„ ì£¼ìš” ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤

### í«ì¼€ì–´ ë§¤ì¹­ í”„ë¡œì„¸ìŠ¤ ìƒì„¸

```mermaid
stateDiagram-v2
    [*] --> ìš”ì²­ìƒì„±: ì‚¬ìš©ì ìš”ì²­
    ìš”ì²­ìƒì„± --> ì§€ì›ëŒ€ê¸°: CareRequest ìƒì„±
    ì§€ì›ëŒ€ê¸° --> ì§€ì›ì ‘ìˆ˜: ì§€ì›ì ì‹ ì²­
    ì§€ì›ì ‘ìˆ˜ --> ë§¤ì¹­ì™„ë£Œ: ì§€ì› ìŠ¹ì¸
    ì§€ì›ì ‘ìˆ˜ --> ì§€ì›ëŒ€ê¸°: ì§€ì› ê±°ë¶€
    ë§¤ì¹­ì™„ë£Œ --> ì¼€ì–´ì§„í–‰: IN_PROGRESS
    ì¼€ì–´ì§„í–‰ --> ì¼€ì–´ì™„ë£Œ: ì¼€ì–´ ìˆ˜í–‰
    ì¼€ì–´ì™„ë£Œ --> ë¦¬ë·°ì‘ì„±: COMPLETED
    ë¦¬ë·°ì‘ì„± --> [*]: ìƒí˜¸ ë¦¬ë·° ì™„ë£Œ
    
    ì§€ì›ëŒ€ê¸° --> ìš”ì²­ì·¨ì†Œ: ì‚¬ìš©ì ì·¨ì†Œ
    ë§¤ì¹­ì™„ë£Œ --> ìš”ì²­ì·¨ì†Œ: ì‚¬ìš©ì ì·¨ì†Œ
    ìš”ì²­ì·¨ì†Œ --> [*]
```

### ëª¨ì„ ì°¸ì—¬ í”„ë¡œì„¸ìŠ¤ ìƒì„¸

```mermaid
stateDiagram-v2
    [*] --> ëª¨ì§‘ì¤‘: ëª¨ì„ ìƒì„±
    ëª¨ì§‘ì¤‘ --> ì°¸ì—¬ì™„ë£Œ: ì°¸ì—¬ì ì¶”ê°€
    ëª¨ì§‘ì¤‘ --> ëª¨ì§‘ë§ˆê°: ìµœëŒ€ ì¸ì› ë„ë‹¬
    ì°¸ì—¬ì™„ë£Œ --> ëª¨ì§‘ë§ˆê°: ìµœëŒ€ ì¸ì› ë„ë‹¬
    ëª¨ì§‘ë§ˆê° --> ëª¨ì„ì§„í–‰: ëª¨ì„ ì¼ì‹œ
    ëª¨ì„ì§„í–‰ --> ëª¨ì„ì™„ë£Œ: COMPLETED
    ëª¨ì„ì™„ë£Œ --> [*]
    
    ëª¨ì§‘ì¤‘ --> ëª¨ì„ì·¨ì†Œ: ì£¼ìµœì ì·¨ì†Œ
    ì°¸ì—¬ì™„ë£Œ --> ì°¸ì—¬ì·¨ì†Œ: ì°¸ì—¬ì ì·¨ì†Œ
    ì°¸ì—¬ì·¨ì†Œ --> ëª¨ì§‘ì¤‘
    ëª¨ì„ì·¨ì†Œ --> [*]
```

## ğŸ¨ UI/UX ì•„í‚¤í…ì²˜

### ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°

```mermaid
graph TB
    APP[App.js<br/>ìµœìƒìœ„ ë¼ìš°í„°] --> LAYOUT[Layout Components]
    APP --> PAGES[Page Components]
    APP --> MODALS[Modal Components]
    
    LAYOUT --> NAV[Navigation]
    LAYOUT --> CHAT_WIDGET[ChatWidget]
    
    PAGES --> HOME[HomePage]
    PAGES --> BOARD[CommunityBoard]
    PAGES --> CARE[CareRequestList]
    PAGES --> MEETUP[MeetupPage]
    PAGES --> MISSING[MissingPetBoardPage]
    PAGES --> LOCATION[LocationServiceMap]
    PAGES --> ADMIN[AdminPanel]
    
    BOARD --> BOARD_DETAIL[CommunityDetailPage]
    BOARD --> POST_MODAL[CommunityPostModal]
    
    CARE --> CARE_FORM[CareRequestForm]
    CARE --> CARE_DETAIL[CareRequestDetailPage]
    
    MISSING --> MISSING_FORM[MissingPetBoardForm]
    MISSING --> MISSING_DETAIL[MissingPetBoardDetail]
    
    MODALS --> EMAIL_MODAL[EmailVerificationModal]
    MODALS --> PERMISSION_MODAL[PermissionDeniedModal]
    
    style APP fill:#61dafb
    style PAGES fill:#99ccff
    style MODALS fill:#ffcc99
```

## ğŸ“ API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°

### REST API êµ¬ì¡°

```
/api/auth/*              - ì¸ì¦/ì¸ê°€
/api/users/*             - ì‚¬ìš©ì ê´€ë¦¬
/api/boards/*            - ê²Œì‹œíŒ
/api/care-requests/*     - í«ì¼€ì–´ ìš”ì²­
/api/meetups/*           - ëª¨ì„
/api/missing-pets/*      - ì‹¤ì¢… ì œë³´
/api/location-services/* - ìœ„ì¹˜ ì„œë¹„ìŠ¤
/api/chat/*              - ì±„íŒ…
/api/notifications/*     - ì•Œë¦¼
/api/reports/*           - ì‹ ê³ 
/api/admin/*              - ê´€ë¦¬ì ê¸°ëŠ¥
/api/geocoding/*         - ì§€ì˜¤ì½”ë”©
```

### WebSocket ì—”ë“œí¬ì¸íŠ¸

```
/ws/chat                 - ì±„íŒ… WebSocket
/ws/chat/{conversationId} - íŠ¹ì • ì±„íŒ…ë°©
```

### SSE ì—”ë“œí¬ì¸íŠ¸

```
/api/notifications/stream - ì‹¤ì‹œê°„ ì•Œë¦¼ ìŠ¤íŠ¸ë¦¼
```

---

ì´ ë¬¸ì„œëŠ” Petory í”„ë¡œì íŠ¸ì˜ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•œ ê²ƒì…ë‹ˆë‹¤.
ê° ë‹¤ì´ì–´ê·¸ë¨ì€ Mermaid í˜•ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì–´ GitHubë‚˜ ë¬¸ì„œ ë·°ì–´ì—ì„œ ìë™ìœ¼ë¡œ ë Œë”ë§ë©ë‹ˆë‹¤.

