# ë„ë©”ì¸ë³„ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸

## ğŸ“‹ ê°œìš”

ê° ë„ë©”ì¸ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì£¼ìš” íŠ¸ëŸ¬ë¸”ìŠˆíŒ… í¬ì¸íŠ¸ì™€ ê°œì„  ë°©ì•ˆì„ ì •ë¦¬í•©ë‹ˆë‹¤. **ì¸ë±ìŠ¤, íŠ¸ëœì­ì…˜, ë½, ìë£Œêµ¬ì¡°/ì•Œê³ ë¦¬ì¦˜** ì ìš©ì´ í•„ìš”í•œ ë¶€ë¶„ì„ ë„ë©”ì¸ë³„ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

---

## 1. ğŸ¯ Meetup (ëª¨ì„) ë„ë©”ì¸

### âš ï¸ ê°€ì¥ ì‹¬ê°í•œ ë¬¸ì œ: Race Condition (ë™ì‹œì„± ë¬¸ì œ)

**ìœ„ì¹˜**: `MeetupService.joinMeetup()`, `MeetupService.cancelMeetupParticipation()`

**ë¬¸ì œ ìƒí™©**:
```java
// MeetupService.java:277-279
if (meetup.getCurrentParticipants() >= meetup.getMaxParticipants()) {
    throw new RuntimeException("ëª¨ì„ ì¸ì›ì´ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤.");
}
// ... 
meetup.setCurrentParticipants(meetup.getCurrentParticipants() + 1); // âš ï¸ Race Condition!
```

**ì‹œë‚˜ë¦¬ì˜¤**:
- ë™ì‹œì— 2ëª…ì´ ëª¨ì„ì— ì°¸ê°€ ì‹œë„
- ë‘˜ ë‹¤ `currentParticipants < maxParticipants` ì²´í¬ í†µê³¼
- ë‘˜ ë‹¤ ì°¸ê°€ ì„±ê³µ â†’ ì¸ì› ì´ˆê³¼ ë°œìƒ!

**í•´ê²° ë°©ì•ˆ**:

#### 1.1 Pessimistic Lock ì ìš© (ì¦‰ì‹œ ì ìš© ê°€ëŠ¥)
```java
@Transactional
public MeetupParticipantsDTO joinMeetup(Long meetupIdx, String userId) {
    // Pessimistic Lockìœ¼ë¡œ ë™ì‹œ ì ‘ê·¼ ë°©ì§€
    Meetup meetup = meetupRepository.findById(meetupIdx)
        .orElseThrow(() -> new RuntimeException("ëª¨ì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
    
    // Lock ì ìš©
    Meetup lockedMeetup = meetupRepository.findByIdWithLock(meetupIdx)
        .orElseThrow(() -> new RuntimeException("ëª¨ì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
    
    // ì¸ì› ì²´í¬ ë° ì¦ê°€ë¥¼ ì›ìì ìœ¼ë¡œ ì²˜ë¦¬
    if (lockedMeetup.getCurrentParticipants() >= lockedMeetup.getMaxParticipants()) {
        throw new RuntimeException("ëª¨ì„ ì¸ì›ì´ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤.");
    }
    
    lockedMeetup.setCurrentParticipants(lockedMeetup.getCurrentParticipants() + 1);
    meetupRepository.save(lockedMeetup);
    
    // ... ì°¸ê°€ì ì¶”ê°€ ë¡œì§
}
```

**Repositoryì— ì¶”ê°€**:
```java
@Lock(LockModeType.PESSIMISTIC_WRITE)
@Query("SELECT m FROM Meetup m WHERE m.idx = :idx")
Optional<Meetup> findByIdWithLock(@Param("idx") Long idx);
```

#### 1.2 Optimistic Lock ì ìš© (ë” ë‚˜ì€ ì„±ëŠ¥)
```java
@Entity
public class Meetup {
    @Version
    private Long version; // Optimistic Lockìš© ë²„ì „ í•„ë“œ
    
    // ...
}
```

#### 1.3 DB ë ˆë²¨ ì œì•½ì¡°ê±´ ì¶”ê°€
```sql
ALTER TABLE meetup 
ADD CONSTRAINT chk_participants 
CHECK (current_participants <= max_participants);
```

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ëª¨ì„ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_meetup_date_status ON meetup(date, status);
CREATE INDEX idx_meetup_location ON meetup(latitude, longitude);
CREATE INDEX idx_meetup_organizer ON meetup(organizer_idx);

-- ì°¸ê°€ì ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_meetup_participants_meetup ON meetup_participants(meetup_idx);
CREATE INDEX idx_meetup_participants_user ON meetup_participants(user_idx);
CREATE UNIQUE INDEX idx_meetup_participants_unique ON meetup_participants(meetup_idx, user_idx);
```

**í˜„ì¬ ë¬¸ì œ**: `getNearbyMeetups()` ë©”ì„œë“œê°€ ì „ì²´ ëª¨ì„ì„ ì¡°íšŒ í›„ Javaì—ì„œ í•„í„°ë§ (line 158)
- **ê°œì„ **: DB ë ˆë²¨ì—ì„œ ê±°ë¦¬ ê³„ì‚° ë° í•„í„°ë§ (Haversine ê³µì‹)

### ğŸ”„ íŠ¸ëœì­ì…˜ ê°œì„ 

**í˜„ì¬**: ì±„íŒ…ë°© ìƒì„± ì‹¤íŒ¨ ì‹œ ëª¨ì„ ìƒì„±ì€ ì„±ê³µ (line 104-107)
- **ê°œì„ **: íŠ¸ëœì­ì…˜ ë¡¤ë°± ì „ëµ ê²€í†  í•„ìš”

---

<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->


## 2. ğŸ’¬ Chat (ì±„íŒ…) ë„ë©”ì¸

### âœ… ì´ë¯¸ ê°œì„ ë¨: unreadCount ì¦ê°€

**ìœ„ì¹˜**: `ChatMessageService.sendMessage()` (line 87)

**í˜„ì¬ ìƒíƒœ**: ì›ìì  ì¿¼ë¦¬ë¡œ Lost Update ë°©ì§€
```java
participantRepository.incrementUnreadCount(conversationIdx, senderIdx);
```

### âš ï¸ ì ì¬ì  ë¬¸ì œ: ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬

**ìœ„ì¹˜**: `ChatMessageService.markAsRead()` (line 149-190)

**ë¬¸ì œ**: ë³µì¡í•œ ì½ìŒ ì²˜ë¦¬ ë¡œì§ì—ì„œ íŠ¸ëœì­ì…˜ ë²”ìœ„ê°€ ë„“ìŒ
- **ê°œì„ **: ì½ìŒ ì²˜ë¦¬ ë¡œì§ ë‹¨ìˆœí™” ë° ë°°ì¹˜ ì²˜ë¦¬

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ë©”ì‹œì§€ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_chat_message_conversation_created ON chat_message(conversation_idx, created_at DESC);
CREATE INDEX idx_chat_message_sender ON chat_message(sender_idx);

-- ì°¸ê°€ì ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_conversation_participant_conversation ON conversation_participant(conversation_idx);
CREATE INDEX idx_conversation_participant_user ON conversation_participant(user_idx);
CREATE INDEX idx_conversation_participant_status ON conversation_participant(status, unread_count);
CREATE UNIQUE INDEX idx_conversation_participant_unique ON conversation_participant(conversation_idx, user_idx);

-- ì½ìŒ ìƒíƒœ ì¡°íšŒ
CREATE INDEX idx_message_read_status_message ON message_read_status(message_idx);
CREATE INDEX idx_message_read_status_user ON message_read_status(user_idx);
```

### ğŸ”„ ìë£Œêµ¬ì¡°/ì•Œê³ ë¦¬ì¦˜ ì ìš©

**í˜„ì¬**: ë©”ì‹œì§€ ì¡°íšŒ ì‹œ í˜ì´ì§• ì‚¬ìš© (line 104-130)
- **ê°œì„ **: ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§•ìœ¼ë¡œ ëŒ€ëŸ‰ ë©”ì‹œì§€ ì²˜ë¦¬ ì„±ëŠ¥ í–¥ìƒ (ì´ë¯¸ `getMessagesBefore()` êµ¬í˜„ë¨)

---

<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->


## 3. ğŸ‘¤ User (ì‚¬ìš©ì) ë„ë©”ì¸

### âš ï¸ ê°€ì¥ ì‹¬ê°í•œ ë¬¸ì œ: ë‹‰ë„¤ì„ ì¤‘ë³µ ì²´í¬ Race Condition

**ìœ„ì¹˜**: `UsersService.createUser()`, `UsersService.updateMyUsername()`, `UsersService.setNickname()`

**ë¬¸ì œ ìƒí™©**:
```java
// UsersService.java:107-110
usersRepository.findByNickname(nickname)
    .ifPresent(existingUser -> {
        throw new RuntimeException("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.");
    });
// ... 
Users saved = usersRepository.save(user); // âš ï¸ ì´ ì‚¬ì´ì— ë‹¤ë¥¸ ìš”ì²­ì´ ê°™ì€ ë‹‰ë„¤ì„ìœ¼ë¡œ ê°€ì… ê°€ëŠ¥!
```

**ì‹œë‚˜ë¦¬ì˜¤**:
- ë™ì‹œì— 2ëª…ì´ ê°™ì€ ë‹‰ë„¤ì„ìœ¼ë¡œ ê°€ì… ì‹œë„
- ë‘˜ ë‹¤ ì¤‘ë³µ ì²´í¬ í†µê³¼
- ë‘˜ ë‹¤ ê°€ì… ì„±ê³µ â†’ ë‹‰ë„¤ì„ ì¤‘ë³µ ë°œìƒ!

**í•´ê²° ë°©ì•ˆ**:

#### 3.1 DB ë ˆë²¨ Unique ì œì•½ì¡°ê±´ (ê°€ì¥ í™•ì‹¤)
```java
@Entity
@Table(name = "users", 
    uniqueConstraints = @UniqueConstraint(columnNames = {"nickname"}))
public class Users {
    @Column(length = 50, unique = true) // âœ… ì´ë¯¸ ìˆìŒ!
    private String nickname;
}
```

**í˜„ì¬ ìƒíƒœ**: `Users.java:30`ì— ì´ë¯¸ `unique = true` ì„¤ì •ë¨
- **ë¬¸ì œ**: ì˜ˆì™¸ ì²˜ë¦¬ í•„ìš”
```java
@Transactional
public UsersDTO createUser(UsersDTO dto) {
    try {
        // ... ì¤‘ë³µ ì²´í¬
        Users saved = usersRepository.save(user);
        return usersConverter.toDTO(saved);
    } catch (DataIntegrityViolationException e) {
        if (e.getMessage().contains("nickname")) {
            throw new RuntimeException("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.");
        }
        throw e;
    }
}
```

#### 3.2 Pessimistic Lock ì ìš©
```java
@Lock(LockModeType.PESSIMISTIC_WRITE)
Optional<Users> findByNicknameForUpdate(String nickname);
```

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ì‚¬ìš©ì ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ (ì´ë¯¸ unique ì œì•½ì¡°ê±´ìœ¼ë¡œ ì¸ë±ìŠ¤ ìƒì„±ë¨)
-- CREATE UNIQUE INDEX idx_users_id ON users(id);
-- CREATE UNIQUE INDEX idx_users_username ON users(username);
-- CREATE UNIQUE INDEX idx_users_nickname ON users(nickname);
-- CREATE UNIQUE INDEX idx_users_email ON users(email);

-- ì¶”ê°€ ì¸ë±ìŠ¤
CREATE INDEX idx_users_status ON users(status);
CREATE INDEX idx_users_deleted ON users(is_deleted, deleted_at);
CREATE INDEX idx_users_location ON users(location); -- ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰
```

### ğŸ”„ íŠ¸ëœì­ì…˜ ê°œì„ 

**í˜„ì¬**: `@Transactional` í´ë˜ìŠ¤ ë ˆë²¨ ì ìš© (line 28)
- **ë¬¸ì œ**: ì½ê¸° ì „ìš© ë©”ì„œë“œë„ ì“°ê¸° íŠ¸ëœì­ì…˜ì— í¬í•¨
- **ê°œì„ **: ì½ê¸° ì „ìš© ë©”ì„œë“œì— `@Transactional(readOnly = true)` ëª…ì‹œ

---

<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->


## 4. ğŸ“ Board (ê²Œì‹œíŒ) ë„ë©”ì¸

### âœ… ì´ë¯¸ ê°œì„ ë¨: ë°°ì¹˜ ì¡°íšŒë¡œ N+1 ë¬¸ì œ í•´ê²°

**ìœ„ì¹˜**: `BoardService.mapBoardsWithReactionsBatch()` (line 435-472)

### âš ï¸ ì ì¬ì  ë¬¸ì œ: ì¡°íšŒìˆ˜ ì¦ê°€ Race Condition

**ìœ„ì¹˜**: `BoardService.getBoard()` (line 207-218)

**í˜„ì¬**: ë‹¨ì¼ íŠ¸ëœì­ì…˜ì—ì„œ ì¡°íšŒìˆ˜ ì¦ê°€
- **ê°œì„ **: ë¹„ë™ê¸° ì²˜ë¦¬ ë˜ëŠ” ë°°ì¹˜ ì—…ë°ì´íŠ¸ ê³ ë ¤

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ê²Œì‹œê¸€ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_board_category_deleted_created ON board(category, is_deleted, created_at DESC);
CREATE INDEX idx_board_user_deleted ON board(user_idx, is_deleted);
CREATE INDEX idx_board_status ON board(status);
CREATE FULLTEXT INDEX idx_board_title_content ON board(title, content); -- ê²€ìƒ‰ìš©

-- ëŒ“ê¸€ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_comment_board_deleted_created ON comment(board_idx, is_deleted, created_at ASC);
CREATE INDEX idx_comment_user ON comment(user_idx);

-- ë°˜ì‘ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_board_reaction_board_type ON board_reaction(board_idx, reaction_type);
CREATE INDEX idx_board_reaction_user ON board_reaction(user_idx);
CREATE UNIQUE INDEX idx_board_reaction_unique ON board_reaction(board_idx, user_idx);

-- ì¡°íšŒìˆ˜ ë¡œê·¸
CREATE INDEX idx_board_view_log_board ON board_view_log(board_idx);
CREATE INDEX idx_board_view_log_user ON board_view_log(user_idx);
CREATE UNIQUE INDEX idx_board_view_log_unique ON board_view_log(board_idx, user_idx);
```

### ğŸ”„ ìë£Œêµ¬ì¡°/ì•Œê³ ë¦¬ì¦˜ ì ìš©

**í˜„ì¬**: ê²€ìƒ‰ ì‹œ Full-Text Search ì‚¬ìš© (line 387)
- **ê°œì„ **: ê²€ìƒ‰ ê²°ê³¼ ì •í™•ë„ í–¥ìƒì„ ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ ì ìš© (TF-IDF, BM25 ë“±)

---

<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->

## 5. ğŸ¥ Care (ëŒë´„ ìš”ì²­) ë„ë©”ì¸

### âš ï¸ ì ì¬ì  ë¬¸ì œ: ìƒíƒœ ë³€ê²½ Race Condition

**ìœ„ì¹˜**: `CareRequestService.updateStatus()` (line 153-161)

**ë¬¸ì œ**: ìƒíƒœ ë³€ê²½ ì‹œ ë™ì‹œì„± ì œì–´ ì—†ìŒ
- **ê°œì„ **: Optimistic Lock ë˜ëŠ” ìƒíƒœ ë¨¸ì‹  íŒ¨í„´ ì ìš©

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ëŒë´„ ìš”ì²­ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_care_request_status_deleted ON care_request(status, is_deleted);
CREATE INDEX idx_care_request_user_deleted ON care_request(user_idx, is_deleted);
CREATE INDEX idx_care_request_date ON care_request(date);
CREATE INDEX idx_care_request_location ON care_request(location); -- ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰

-- ì§€ì›ì„œ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_care_application_request ON care_application(care_request_idx);
CREATE INDEX idx_care_application_user ON care_application(user_idx);
CREATE INDEX idx_care_application_status ON care_application(status);
```

### ğŸ”„ íŠ¸ëœì­ì…˜ ê°œì„ 

**í˜„ì¬**: ìœ„ì¹˜ í•„í„°ë§ì„ Javaì—ì„œ ì²˜ë¦¬ (line 46-51)
- **ê°œì„ **: DB ë ˆë²¨ì—ì„œ ìœ„ì¹˜ ê¸°ë°˜ ì¿¼ë¦¬ ìµœì í™”

---

<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->

## 6. ğŸ“¢ Report (ì‹ ê³ ) ë„ë©”ì¸

### âš ï¸ ê°€ì¥ ì‹¬ê°í•œ ë¬¸ì œ: ì¤‘ë³µ ì‹ ê³  ì²´í¬ Race Condition

**ìœ„ì¹˜**: `ReportService.createReport()` (line 65-70)

**ë¬¸ì œ ìƒí™©**:
```java
if (reportRepository.existsByTargetTypeAndTargetIdxAndReporterIdx(...)) {
    throw new IllegalStateException("ì´ë¯¸ í•´ë‹¹ ëŒ€ìƒì„ ì‹ ê³ í•˜ì…¨ìŠµë‹ˆë‹¤.");
}
// ... 
Report saved = reportRepository.save(report); // âš ï¸ Race Condition!
```

**ì‹œë‚˜ë¦¬ì˜¤**:
- ê°™ì€ ì‚¬ìš©ìê°€ ë™ì‹œì— ê°™ì€ ëŒ€ìƒì„ 2ë²ˆ ì‹ ê³  ì‹œë„
- ë‘˜ ë‹¤ ì¤‘ë³µ ì²´í¬ í†µê³¼
- ë‘˜ ë‹¤ ì‹ ê³  ì„±ê³µ â†’ ì¤‘ë³µ ì‹ ê³  ë°œìƒ!

**í•´ê²° ë°©ì•ˆ**:

#### 6.1 DB ë ˆë²¨ Unique ì œì•½ì¡°ê±´
```sql
CREATE UNIQUE INDEX idx_report_unique 
ON report(target_type, target_idx, reporter_idx);
```

#### 6.2 Pessimistic Lock ì ìš©
```java
@Lock(LockModeType.PESSIMISTIC_WRITE)
boolean existsByTargetTypeAndTargetIdxAndReporterIdxForUpdate(...);
```

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ì‹ ê³  ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_report_target_type_status ON report(target_type, status, created_at DESC);
CREATE INDEX idx_report_reporter ON report(reporter_idx);
CREATE INDEX idx_report_target ON report(target_type, target_idx);
CREATE INDEX idx_report_status ON report(status);
CREATE UNIQUE INDEX idx_report_unique ON report(target_type, target_idx, reporter_idx);
```

---

<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->

## 7. ğŸ”” Notification (ì•Œë¦¼) ë„ë©”ì¸

### âœ… ì´ë¯¸ ê°œì„ ë¨: Redis ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”

**ìœ„ì¹˜**: `NotificationService` ì „ì²´

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ì•Œë¦¼ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_notification_user_created ON notification(user_idx, created_at DESC);
CREATE INDEX idx_notification_user_read ON notification(user_idx, is_read, created_at DESC);
CREATE INDEX idx_notification_type ON notification(type);
```

---

## 8. ğŸ“ Location (ìœ„ì¹˜ ì„œë¹„ìŠ¤) ë„ë©”ì¸

### ğŸ“Š ì¸ë±ìŠ¤ ìµœì í™”

**í•„ìš”í•œ ì¸ë±ìŠ¤**:
```sql
-- ìœ„ì¹˜ ì„œë¹„ìŠ¤ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_location_service_category_rating ON locationservice(category, rating DESC);
CREATE INDEX idx_location_service_location ON locationservice(latitude, longitude);
CREATE INDEX idx_location_service_sido ON locationservice(sido);
CREATE INDEX idx_location_service_sigungu ON locationservice(sigungu);
CREATE INDEX idx_location_service_eupmyeondong ON locationservice(eupmyeondong);
CREATE INDEX idx_location_service_road_name ON locationservice(road_name);

-- ë¦¬ë·° ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_location_review_service ON location_service_review(location_service_idx);
CREATE INDEX idx_location_review_user ON location_service_review(user_idx);
CREATE INDEX idx_location_review_rating ON location_service_review(rating);
```

### ğŸ”„ ìë£Œêµ¬ì¡°/ì•Œê³ ë¦¬ì¦˜ ì ìš©

**í˜„ì¬**: `getNearbyMeetups()`ì—ì„œ Haversine ê³µì‹ ì‚¬ìš© (line 162-179)
- **ê°œì„ **: ê³µê°„ ì¸ë±ìŠ¤ (Spatial Index) ì‚¬ìš© ê³ ë ¤
```sql
-- MySQL 8.0+ Spatial Index
ALTER TABLE locationservice 
ADD SPATIAL INDEX idx_location_service_coords (POINT(longitude, latitude));
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ ê°œì„  ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸ”´ Critical (ì¦‰ì‹œ ìˆ˜ì • í•„ìš”)

1. **Meetup**: `currentParticipants` ì¦ê°€/ê°ì†Œ Race Condition
   - Pessimistic Lock ë˜ëŠ” Optimistic Lock ì ìš©
   - DB ì œì•½ì¡°ê±´ ì¶”ê°€

2. **Report**: ì¤‘ë³µ ì‹ ê³  ì²´í¬ Race Condition
   - Unique ì œì•½ì¡°ê±´ ì¶”ê°€
   - ì˜ˆì™¸ ì²˜ë¦¬ ê°œì„ 

3. **User**: ë‹‰ë„¤ì„ ì¤‘ë³µ ì²´í¬ ì˜ˆì™¸ ì²˜ë¦¬
   - `DataIntegrityViolationException` ì²˜ë¦¬ ì¶”ê°€

### ğŸŸ¡ High (ë¹ ë¥¸ ì‹œì¼ ë‚´ ìˆ˜ì •)

4. **Chat**: ì¸ë±ìŠ¤ ì¶”ê°€
   - ë©”ì‹œì§€ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ

5. **Board**: ì¸ë±ìŠ¤ ì¶”ê°€
   - ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ

6. **Care**: ìƒíƒœ ë³€ê²½ ë™ì‹œì„± ì œì–´
   - Optimistic Lock ì ìš©

### ğŸŸ¢ Medium (ì ì§„ì  ê°œì„ )

7. **Location**: ê³µê°„ ì¸ë±ìŠ¤ ì ìš©
   - ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ

8. **Meetup**: ê±°ë¦¬ ê³„ì‚° DB ë ˆë²¨ ì²˜ë¦¬
   - Java í•„í„°ë§ â†’ DB ì¿¼ë¦¬ë¡œ ë³€ê²½

9. **Board**: ì¡°íšŒìˆ˜ ì¦ê°€ ë¹„ë™ê¸° ì²˜ë¦¬
   - ì„±ëŠ¥ ìµœì í™”

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Spring Data JPA Locking](https://www.baeldung.com/jpa-pessimistic-locking)
- [MySQL Index Optimization](https://dev.mysql.com/doc/refman/8.0/en/optimization-indexes.html)
- [Race Condition Prevention](https://www.baeldung.com/java-race-conditions)
- [Transaction Isolation Levels](https://www.baeldung.com/spring-transactional-propagation-isolation)
