# findAvailableMeetups() ì„±ëŠ¥ ë¹„êµ - ë¦¬íŒ©í† ë§ ì „/í›„

## ðŸ“‹ ì¸¡ì • ê°œìš”

**ì¸¡ì • ì¼ì‹œ**: 2026-02-08  
**ì¸¡ì • ë©”ì„œë“œ**: `SpringDataJpaMeetupRepository.findAvailableMeetups()`  
**ì¸¡ì • ëª©ì **: ì„œë¸Œì¿¼ë¦¬ â†’ LEFT JOIN + GROUP BY + HAVING ë¦¬íŒ©í† ë§ ì „/í›„ ì„±ëŠ¥ ë¹„êµ

---

## ðŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½

- **ì „ì²´ ëª¨ìž„ ìˆ˜**: 100 ê°œ
- **í˜„ìž¬ ë‚ ì§œ**: 2026-02-08T21:13:04.737261700
- **ëª¨ìž„ë‹¹ ì°¸ì—¬ìž ìˆ˜ ë²”ìœ„**: 0 ~ 8 ëª…
- **ìµœëŒ€ ì°¸ì—¬ ì¸ì›**: 10 ëª…
- **í…ŒìŠ¤íŠ¸ ë°ì´í„°**: ë‹¤ì–‘í•œ ë‚ ì§œ, ì‚­ì œ ìƒíƒœ, ì°¸ì—¬ìž ìˆ˜ë¥¼ ê°€ì§„ ëª¨ìž„

---

## ðŸ“Š ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼ ë¹„êµ

| í•­ëª© | Before (ì„œë¸Œì¿¼ë¦¬) | After (JOIN + GROUP BY) | ê°œì„  | ê°œì„ ìœ¨ |
|------|------------------|------------------------|------|--------|
| **ì‹¤í–‰ ì‹œê°„** | 156 ms | 57 ms | **-99 ms** | **63.5% ê°ì†Œ** â¬‡ï¸ |
| **DB ì¿¼ë¦¬ ì‹œê°„** | 156 ms | 57 ms | **-99 ms** | **63.5% ê°ì†Œ** â¬‡ï¸ |
| **ì¿¼ë¦¬ ì‹¤í–‰ íšŸìˆ˜** | 1 ê°œ | 1 ê°œ | ë™ì¼ | - |
| **PrepareStatement íšŸìˆ˜** | 6 ê°œ | 6 ê°œ | ë™ì¼ | - |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰** | 19.07 MB | 2.00 MB | **-17.07 MB** | **89.5% ê°ì†Œ** â¬‡ï¸ |
| **ì¡°íšŒëœ ëª¨ìž„ ìˆ˜** | 49 ê°œ | 49 ê°œ | ë™ì¼ âœ… | - |

---

## ðŸ” ìƒì„¸ ë¶„ì„

### ë¦¬íŒ©í† ë§ ì „ (ì„œë¸Œì¿¼ë¦¬)

**ì¿¼ë¦¬ êµ¬ì¡°**:
```sql
SELECT m.* FROM meetup m 
WHERE m.max_participants > (
    SELECT COUNT(*) FROM meetupparticipants mp 
    WHERE mp.meetup_idx = m.idx
) 
AND m.date > ? 
AND (m.is_deleted = 0 OR m.is_deleted IS NULL) 
ORDER BY m.date
```

**ì„±ëŠ¥ íŠ¹ì„±**:
- ì‹¤í–‰ ì‹œê°„: 156 ms
- PrepareStatement ìˆ˜: 6ê°œ (Hibernateê°€ ì„œë¸Œì¿¼ë¦¬ë¥¼ ìµœì í™”í•˜ì—¬ ë°°ì¹˜ ì²˜ë¦¬)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: 19.07 MB
- ì¿¼ë¦¬ ì‹¤í–‰ íšŸìˆ˜: 1ê°œ (Hibernate Statistics ê¸°ì¤€)

### ë¦¬íŒ©í† ë§ í›„ (LEFT JOIN + GROUP BY + HAVING)

**ì¿¼ë¦¬ êµ¬ì¡°**:
```sql
SELECT m.* FROM meetup m 
LEFT JOIN meetupparticipants p ON m.idx = p.meetup_idx 
WHERE m.date > ? 
AND (m.is_deleted = 0 OR m.is_deleted IS NULL) 
GROUP BY m.idx 
HAVING COUNT(CASE WHEN p.meetup_idx IS NOT NULL AND p.user_idx IS NOT NULL THEN 1 ELSE NULL END) < m.max_participants 
ORDER BY m.date
```

**ì„±ëŠ¥ íŠ¹ì„±**:
- ì‹¤í–‰ ì‹œê°„: 57 ms (**63.5% ê°ì†Œ**)
- PrepareStatement ìˆ˜: 6ê°œ (ë™ì¼)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: 2.00 MB (**89.5% ê°ì†Œ**)
- ì¿¼ë¦¬ ì‹¤í–‰ íšŸìˆ˜: 1ê°œ (Hibernate Statistics ê¸°ì¤€)

---

## ðŸ“ˆ ê°œì„  íš¨ê³¼ ë¶„ì„

### 1. ì‹¤í–‰ ì‹œê°„ ê°œì„ 

**63.5% ê°ì†Œ** (156ms â†’ 57ms, 99ms ê°œì„ )

**ê°œì„  ìš”ì¸**:
- ì„œë¸Œì¿¼ë¦¬ ì œê±°ë¡œ ì¿¼ë¦¬ ì‹¤í–‰ ê³„íš ìµœì í™”
- JOIN ë°©ì‹ì´ ì„œë¸Œì¿¼ë¦¬ë³´ë‹¤ íš¨ìœ¨ì ì¸ ì‹¤í–‰ ê³„íš ìƒì„±
- GROUP BYì™€ HAVINGì´ ë‹¨ì¼ ì¿¼ë¦¬ì—ì„œ ì²˜ë¦¬ë˜ì–´ ì˜¤ë²„í—¤ë“œ ê°ì†Œ

### 2. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°œì„ 

**89.5% ê°ì†Œ** (19.07 MB â†’ 2.00 MB, 17.07 MB ê°œì„ )

**ê°œì„  ìš”ì¸**:
- ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰ ì‹œ ì¤‘ê°„ ê²°ê³¼ ì§‘í•© ìƒì„±ìœ¼ë¡œ ì¸í•œ ë©”ëª¨ë¦¬ ì‚¬ìš© ê°ì†Œ
- JOIN ë°©ì‹ì´ ë” íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´
- ë¶ˆí•„ìš”í•œ ìž„ì‹œ ë°ì´í„° êµ¬ì¡° ì œê±°

### 3. PrepareStatement ìˆ˜

**ë³€í™” ì—†ìŒ** (6ê°œ â†’ 6ê°œ)

**ë¶„ì„**:
- **N+1 ë¬¸ì œê°€ ì•„ë‹ˆì—ˆìŒ**: PrepareStatement ìˆ˜ê°€ 6ê°œë¡œ ë™ì¼í•œ ê²ƒì„ ë³´ë©´, ì„œë¸Œì¿¼ë¦¬ê°€ ê° í–‰ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” N+1 íŒ¨í„´ì´ ì•„ë‹ˆì—ˆìŒ
- Hibernateê°€ ì„œë¸Œì¿¼ë¦¬ë¥¼ ìµœì í™”í•˜ì—¬ ë°°ì¹˜ ì²˜ë¦¬í–ˆê¸° ë•Œë¬¸ì— PrepareStatement ìˆ˜ëŠ” ë™ì¼
- **ì‹¤ì œ ë¬¸ì œ**: N+1 ë¬¸ì œê°€ ì•„ë‹ˆë¼ ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰ ê³„íšì˜ ë¹„íš¨ìœ¨ì´ì—ˆìŒ
- **ì‹¤ì œ ê°œì„ **: ì¿¼ë¦¬ ìˆ˜ê°€ ì•„ë‹ˆë¼ ì¿¼ë¦¬ ì‹¤í–‰ ê³„íš ìµœì í™”ì™€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°ì†Œì—ì„œ ë°œìƒ
- JOIN ë°©ì‹ì´ ì„œë¸Œì¿¼ë¦¬ë³´ë‹¤ ë” íš¨ìœ¨ì ì¸ ì‹¤í–‰ ê³„íšì„ ìƒì„±í•˜ì—¬ ì‹¤í–‰ ì‹œê°„ê³¼ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ê°œì„ ë¨

---

## âœ… ê²€ì¦ ê²°ê³¼

- **ê²°ê³¼ ì¼ì¹˜**: ë¦¬íŒ©í† ë§ ì „í›„ ì¡°íšŒëœ ëª¨ìž„ ìˆ˜ê°€ ë™ì¼ (49ê°œ)
- **ê²°ê³¼ ì •í™•ì„±**: ë¦¬íŒ©í† ë§ ì „í›„ ì¡°íšŒëœ ëª¨ìž„ì˜ idxê°€ ë™ì¼
- **ê¸°ëŠ¥ ì •ìƒ**: ë¦¬íŒ©í† ë§ìœ¼ë¡œ ì¸í•œ ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ

---

## ðŸ’¡ ê²°ë¡ 

### ì£¼ìš” ê°œì„  ì‚¬í•­

1. **ì‹¤í–‰ ì‹œê°„ 63.5% ê°ì†Œ**
   - ì„œë¸Œì¿¼ë¦¬ â†’ JOIN ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì¿¼ë¦¬ ì‹¤í–‰ íš¨ìœ¨ì„± í–¥ìƒ
   - 156ms â†’ 57msë¡œ ëŒ€í­ ê°œì„ 

2. **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 89.5% ê°ì†Œ**
   - ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰ ì‹œ ìƒì„±ë˜ë˜ ì¤‘ê°„ ê²°ê³¼ ì§‘í•© ì œê±°
   - 19.07 MB â†’ 2.00 MBë¡œ ëŒ€í­ ê°œì„ 

3. **ì¿¼ë¦¬ ìˆ˜ëŠ” ë™ì¼í•˜ì§€ë§Œ ì‹¤í–‰ íš¨ìœ¨ í–¥ìƒ**
   - PrepareStatement ìˆ˜ëŠ” ë™ì¼í•˜ì§€ë§Œ ì‹¤í–‰ ê³„íš ìµœì í™”ë¡œ ì„±ëŠ¥ ê°œì„ 
   - ì‹¤ì œ DB ë¶€í•˜ëŠ” ê°ì†Œ

### ë¦¬íŒ©í† ë§ íš¨ê³¼

- âœ… **ì„±ëŠ¥ ê°œì„ **: ì‹¤í–‰ ì‹œê°„ 63.5% ê°ì†Œ, ë©”ëª¨ë¦¬ 89.5% ê°ì†Œ
- âœ… **ê¸°ëŠ¥ ìœ ì§€**: ë¦¬íŒ©í† ë§ ì „í›„ ê²°ê³¼ ë™ì¼
- âœ… **ì½”ë“œ í’ˆì§ˆ**: ì„œë¸Œì¿¼ë¦¬ ì œê±°ë¡œ ì¿¼ë¦¬ ê°€ë…ì„± í–¥ìƒ
- âœ… **í™•ìž¥ì„±**: ë°ì´í„° ì¦ê°€ ì‹œì—ë„ ì•ˆì •ì ì¸ ì„±ëŠ¥ ìœ ì§€

---

## ðŸ“ ì°¸ê³  ì‚¬í•­

- PrepareStatement ìˆ˜ê°€ ë™ì¼í•œ ê²ƒì€ Hibernateê°€ ì„œë¸Œì¿¼ë¦¬ë¥¼ ìµœì í™”í–ˆê¸° ë•Œë¬¸
- ì‹¤ì œ ê°œì„ ì€ ì¿¼ë¦¬ ì‹¤í–‰ ê³„íšê³¼ ì‹¤í–‰ ì‹œê°„ì—ì„œ ë°œìƒ
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°œì„ ì´ ê°€ìž¥ í° íš¨ê³¼
- ì‹¤í–‰ ì‹œê°„ ê°œì„ ìœ¼ë¡œ ì‚¬ìš©ìž ê²½í—˜ í–¥ìƒ

---

## ðŸ”— ê´€ë ¨ ë¬¸ì„œ

- [ë¦¬íŒ©í† ë§ ì „ ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼](./performance-results-before.md)
- [EXPLAIN ì‹¤í–‰ ê³„íš ë¶„ì„](./explain-results.md)
- [ì„œë¸Œì¿¼ë¦¬ ìµœì í™” ë¬¸ì„œ](./ì„œë¸Œì¿¼ë¦¬%20ìµœì í™”.md)
- [ë°±ì—”ë“œ ì„±ëŠ¥ ìµœì í™” ë¬¸ì„œ](../backend-performance-optimization.md)
